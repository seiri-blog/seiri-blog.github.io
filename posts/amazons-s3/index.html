<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Amazon S3 | Seiri's Blog</title>
<meta name=keywords content="AWS,S3"><meta name=description content="Amazon S3 とは Amazon Simple Storage Service (Amazon S3) は、業界をリードするスケーラビリティ、データ可用性、セキュリティ、およびパフォーマンスを提供するオブジェクトストレージサ"><meta name=author content="Seiri"><link rel=canonical href=https://seiri-blog.github.io/posts/amazons-s3/><meta name=yandex-verification content="017a61651e9c5c6d"><link href=https://seiri-blog.github.io/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://seiri-blog.github.io/favicon.ico><link rel=apple-touch-icon href=https://seiri-blog.github.io/apple-touch-icon.png><link rel=mask-icon href=https://seiri-blog.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://seiri-blog.github.io/posts/amazons-s3/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4988552421895566" crossorigin=anonymous></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-PLYEQ297HF"></script><script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-PLYEQ297HF",{anonymize_ip:!1})}</script><meta property="og:title" content="Amazon S3"><meta property="og:description" content="Amazon S3 とは Amazon Simple Storage Service (Amazon S3) は、業界をリードするスケーラビリティ、データ可用性、セキュリティ、およびパフォーマンスを提供するオブジェクトストレージサ"><meta property="og:type" content="article"><meta property="og:url" content="https://seiri-blog.github.io/posts/amazons-s3/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-22T11:54:52+09:00"><meta property="article:modified_time" content="2022-07-22T11:54:52+09:00"><meta property="og:site_name" content="Seiri's Blog"><meta name=twitter:card content="summary"><meta name=twitter:title content="Amazon S3"><meta name=twitter:description content="Amazon S3 とは Amazon Simple Storage Service (Amazon S3) は、業界をリードするスケーラビリティ、データ可用性、セキュリティ、およびパフォーマンスを提供するオブジェクトストレージサ"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://seiri-blog.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Amazon S3","item":"https://seiri-blog.github.io/posts/amazons-s3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Amazon S3","name":"Amazon S3","description":"Amazon S3 とは Amazon Simple Storage Service (Amazon S3) は、業界をリードするスケーラビリティ、データ可用性、セキュリティ、およびパフォーマンスを提供するオブジェクトストレージサ","keywords":["AWS","S3"],"articleBody":"Amazon S3 とは Amazon Simple Storage Service (Amazon S3) は、業界をリードするスケーラビリティ、データ可用性、セキュリティ、およびパフォーマンスを提供するオブジェクトストレージサービスです。あらゆる規模や業界のお客様が、Amazon S3 を使用して、データレイク、ウェブサイト、モバイルアプリケーション、バックアップおよび復元、アーカイブ、エンタープライズアプリケーション、IoT デバイス、ビッグデータ分析など、広範なユースケースのデータを容量にかかわらず、保存して保護することができます。Amazon S3 には、特定のビジネス、組織、コンプライアンスの要件を満たすために、データへのアクセスを最適化、整理、設定できる管理機能があります。\nトピック Amazon S3 の機能 Amazon S3 の仕組み Amazon S3 のデータ整合性モデル 関連する のサービス Amazon S3 へのアクセス Amazon S3 の支払い PCI DSS コンプライアンス Amazon S3 の機能 ストレージクラス Amazon S3 では、さまざまなユースケース向けに、幅広いストレージクラスが提供されています。例えば、ミッションクリティカルな本番データを S3 Standard に保存して頻繁にアクセスしたり、アクセス頻度の低いデータを S3 標準 – IA または S3 1 ゾーン – IA に保存してコストを節約したり、S3 Glacier Instant Retrieval、S3 Glacier Flexible Retrieval、S3 Glacier Deep Archive でデータを最も低いコストでアーカイブしたりできます。\nS3 Intelligent-Tiering では、変更する、または不明なアクセスパターンを持つデータを保存できます。これにより、アクセスパターンが変更されたときに 4 つのアクセス層間でデータを自動的に移動することで、ストレージコストを最適化できます。4 つのアクセス階層にあ、高頻度のアクセスと低頻度のアクセス用に最適化された 2 つの低レイテンシーのアクセス階層と、稀にしかアクセスされないデータ向けに設計された非同期アクセス用の 2 つのオプトインアーカイブアクセス階層があります。\n詳細については、「Amazon S3 ストレージクラスを使用する」を参照してください。S3 Glacier Flexible Retrieval の詳細については、Amazon S3 Glacier デベロッパーガイドを参照してください。\nストレージ管理 Amazon S3 には、コストの管理、規制要件への対応、レイテンシーの削減、コンプライアンス要件のためのデータの複数の個別コピーの保存で使用できるストレージ管理機能があります。\nS3 ライフサイクル – オブジェクトを管理し、ライフサイクルを通じてコスト効率の高い方法で保存できるようにライフサイクルポリシーを設定します。オブジェクトを他の S3 ストレージクラスに移行したり、ライフタイムが終了したオブジェクトを期限切れにすることができます。\nS3 オブジェクトロック – Amazon S3 オブジェクトが固定期間または無期限に削除または上書きされるのを防止します。オブジェクトロックを使用して、write-once-read-many (WORM) ストレージを必要とする規制要件を満たしたり、オブジェクトの変更や削除に対する保護レイヤーを追加したりできます。\nS3 レプリケーション – オブジェクトおよびそれぞれのメタデータタグとオブジェクトタグを、同じまたは異なる AWS リージョン にある 1 つまたは複数のレプリケーション先バケットにレプリケートして、レイテンシーの削減、コンプライアンス、セキュリティ、その他のユースケースで活用できます。\nS3 バッチ操作 – 1 つの S3 API リクエストまたは Amazon S3 コンソールで数回クリックするだけで、数十億のオブジェクトを大規模に管理できます。バッチ操作を使用すると、次のようなオペレーションを実行できます。コピー、AWS Lambda 関数の呼び出し、数百万または数十億のオブジェクトの復元。\nアクセス管理 Amazon S3 には、バケットとオブジェクトへのアクセスを監査および管理する機能があります。デフォルトでは、S3 バケットとオブジェクトはプライベートです。作成した S3 リソースにのみアクセスできます。以下の機能を使用して、特定のユースケースをサポートする詳細なリソース許可を付与したり、Amazon S3 リソースの許可を監査したりできます。\nS3 ブロックパブリックアクセス – S3 バケットおよびオブジェクトへのパブリックアクセスをブロックします。デフォルトでは、ブロックパブリックアクセス設定はアカウントレベルとバケットレベルで有効になっています。\nAWS Identity and Access Management (IAM) – AWS アカウント の IAM ユーザーを作成して、Amazon S3 リソースへのアクセスを管理します。例えば、Amazon S3 で IAM を使用して、AWS アカウント が所有する S3 バケットに対するユーザーまたはユーザーグループのアクセス権のタイプをコントロールすることができます。\nバケットポリシー – IAM ベースのポリシー言語を使用して、S3 バケットとその中のオブジェクトに対するリソースベースの許可を設定します。\nAmazon S3 アクセスポイント — 専用アクセスポリシーを持つ名前付きネットワークエンドポイントを設定して、Amazon S3 の共有データセットへの大規模なデータアクセスを管理します。\nアクセスコントロールリスト (ACL) – 個々のバケットおよびオブジェクトに対する読み取りおよび書き込みの許可を、承認されたユーザーに付与します。原則として、アクセスコントロールには ACL ではなく S3 リソースベースのポリシー (バケットポリシーとアクセスポイントポリシー) または IAM ポリシーを使用することをお勧めします。ACL は、リソースベースのポリシーと IAM よりも優先されるアクセスコントロールメカニズムです。リソースベースのポリシーまたは IAM ポリシーの代わりに ACL を使用する場合の詳細については、「アクセスポリシーのガイドライン」を参照してください。\nS3 オブジェクト所有権 - ACL を無効にし、バケット内のすべてのオブジェクトの所有権を取得し、Amazon S3 に保存されているデータのアクセス管理を簡素化します。バケット所有者はバケット内のすべてのオブジェクトを自動的に所有し完全に制御できます。データのアクセス制御はポリシーに基づきます。\nAccess Analyzer for S3 – S3 バケットアクセスポリシーを評価およびモニタリングし、ポリシーが S3 リソースへの意図したアクセスのみを提供することを確認します。\nデータ処理 データを変換し、ワークフローをトリガーして、他のさまざまな処理アクティビティを大規模に自動化するには、次の機能を使用できます。\nS3 Object Lambda – Amazon S3 GET リクエストに独自のコードを追加して、データがアプリケーションに返されるときにそのデータを変更および処理できます。行のフィルタリング、画像の動的なサイズ変更、機密データの編集などを行います。\nイベント通知 – S3 リソースに変更が加えられると、Amazon Simple Notification Service (Amazon SNS)、Amazon Simple Queue Service (Amazon SQS)、および AWS Lambda を使用するワークフローをトリガーします。\nストレージのログ記録とモニタリング Amazon S3 には、Amazon S3 リソースの使用状況をモニタリングおよびコントロールするために使用できるロギングおよびモニタリングツールが用意されています。詳細については、「モニタリングツール 」を参照してください。\n自動モニタリングツール Amazon S3 の Amazon CloudWatch メトリクス – TS3 リソースのオペレーション状態を追跡し、推定請求額がユーザー定義のしきい値に達したときに請求アラートを設定します。\nAWS CloudTrail – ユーザー、ロール、または Amazon S3 で AWS のサービス によって行われるアクションを記録します。CloudTrail ログを使用すると、S3 バケットレベルおよびオブジェクトレベルのオペレーションの詳細な API 追跡が可能になります。\n手動モニタリングツール サーバーアクセスログ – バケットに対するリクエストの詳細が記録されます。サーバーアクセスのログ記録を使用して、セキュリティとアクセスの監査、カスタマーベースに関するラーニング、Amazon S3 請求書の把握などの多くのユースケースに対応できます。\nAWSTrusted Advisor – AWS ベストプラクティスチェックを使用してアカウントを評価し、AWS インフラストラクチャを最適化し、セキュリティとパフォーマンスを向上させ、コストを削減し、サービスクォータを監視する方法を特定します。その後、推奨事項に従って、サービスとリソースを最適化できます。\n分析とインサイト Amazon S3 には、ストレージの使用状況を可視化するための機能が用意されています。これにより、ストレージを大規模に理解、分析し、最適化することができます。\nAmazon S3 Storage Lens – ストレージを理解、分析し、最適化します。S3 Storage Lens は、29 以上の使用状況およびアクティビティのメトリクスとインタラクティブなダッシュボードを提供し、組織全体、特定のアカウント、AWS リージョン、バケット、またはプレフィックスに関するデータを集約します。\nストレージクラス分析 – ストレージアクセスパターンを分析して、よりコスト効果の高いストレージクラスにデータを移動するタイミングを決定します。\nインベントリ付き S3 インベントリレポート – オブジェクトとそれに対応するメタデータを監査してレポートし、インベントリレポートでアクションを実行するように他の Amazon S3 機能を設定します。例えば、オブジェクトのレプリケーションと暗号化のステータスをレポートできます。インベントリレポートの各オブジェクトで使用できるすべてのメタデータのリストについては、「Amazon S3 インベントリリスト」を参照してください。\n強力な整合性 Amazon S3 には、すべての AWS リージョン にある Amazon S3 バケットの、オブジェクトの PUT と DELETE に関する、書き込み後読み取りの強力な整合性があります。この動作は、新しいオブジェクトへの書き込みと、既存のオブジェクトを上書きする PUT、そして DELETE リクエストにも適用されます。さらに、Amazon S3 Select、Amazon S3 アクセスコントロールリスト (ACL)、Amazon S3 オブジェクトタグ、オブジェクトメタデータ (HEAD オブジェクトなど) での読み込みオペレーションには、強力な整合性があります。詳細については、「Amazon S3 のデータ整合性モデル」を参照してください。\nAmazon S3 の仕組み Amazon S3 は、データをオブジェクトとしてバケットに保存するオブジェクトストレージサービスです。オブジェクトとは、ファイルと、そのファイルを記述している任意のメタデータのことです。バケット とは、オブジェクトのコンテナのことです。\nAmazon S3 にデータを保存するには、まずバケットを作成し、バケット名および AWS リージョン を指定します。次に、Amazon S3 のオブジェクトとしてそのバケットにデータをアップロードします。各オブジェクトには、キー(またはキー名) があります。これは、バケット内のオブジェクトの一意の識別子です。\nS3 には、特定のユースケースをサポートするように設定できる機能があります。例えば、S3 Versioning を使用すると、オブジェクトの複数のバージョンを同じバケットに保持し、誤って削除または上書きされたオブジェクトを復元することができます。\nバケットとその中のオブジェクトはプライベートであり、アクセス許可を明示的に付与した場合にのみアクセスできます。バケットポリシー、AWS Identity and Access Management(IAM) ポリシー、アクセスコントロールリスト (ACL)、および S3 アクセスポイントを使用して、アクセスを管理できます。\nトピック バケット オブジェクト キー S3 バージョニング バージョン ID バケットポリシー S3 アクセスポイント アクセスコントロールリスト (ACL) リージョン バケット バケットとは、Amazon S3 に保存されるオブジェクトのコンテナです。バケットにはオブジェクトをいくつでも保存でき、アカウントにはバケットを 100 個まで保存できます。増加をリクエストするには、Service Quotas コンソールにアクセスしてください。\nすべてのオブジェクトはバケット内に保存されます。例えば、photos/puppy.jpg という名前のオブジェクトが米国西部 (オレゴン) リージョンにある DOC-EXAMPLE-BUCKET バケットに保存される場合、URL https://DOC-EXAMPLE-BUCKET.s3.us-west-2.amazonaws.com/photos/puppy.jpg を使用してアドレスを解決できます。詳細については、「バケットへのアクセス」を参照してください。\nバケットを作成するときは、バケット名を入力し、バケットが存在する AWS リージョン を選択します。一度バケットを作成したら、そのバケット名またはリージョンを変更することはできません。バケット名は、バケットの命名規則に従う必要があります。また、バケットを設定して、S3 バージョニングまたは、他のストレージ管理機能を使用できます。\nバケットは、以下も行います。\n最も高いレベルで Amazon S3 名前空間を編成します。\nストレージおよびデータ転送料金が課金されるアカウントを特定します。\nバケットポリシー、アクセスコントロールリスト (ACL)、および S3 アクセスポイントなどのアクセスコントロールオプションを提供します。これを使用すると、Amazon S3 リソースへのアクセスを管理できます。\n使用状況レポートの集計単位として機能します。\nバケットの詳細については、「バケットの概要」を参照してください。\nオブジェクト オブジェクトとは、Amazon S3 に保存される基本エンティティです。オブジェクトは、オブジェクトデータとメタデータで構成されます。メタデータは、オブジェクトを表現する名前と値のペアのセットです。これには最終更新日などのデフォルトメタデータや、Content-Type などの標準 HTTP メタデータが含まれます。また、オブジェクトの保存時にカスタムメタデータを指定することもできます。\nオブジェクトは、バケット内でキー (名前)とバージョン ID（バケットで S3 バージョニングが有効になっている場合）によって一意に特定されます。オブジェクトの詳細については、Amazon S3 オブジェクトの概要 を参照してください。\nキー オブジェクトキー (または キー名) は、バケット内のオブジェクトの固有の識別子です。バケット内のすべてのオブジェクトは、厳密に 1 個のキーを持ちます。バケット、オブジェクトキー、およびオプションでバージョン ID（バケットで S3 バージョニングが有効になっている場合）の組み合わせによって、各オブジェクトが一意に識別されます。そのため、Amazon S3 を「バケット + キー + バージョン」とオブジェクト自体の間での基本データマップと考えることができます。\nAmazon S3 内の各オブジェクトは、ウェブサービスエンドポイント、バケット名、キー、およびオプションでバージョンを組み合わせることで一意にアドレスを指定できます。例えば、https://DOC-EXAMPLE-BUCKET.s3.us-west-2.amazonaws.com/photos/puppy.jpg という URL で、「DOC-EXAMPLE-BUCKET」がバケットの名前で、「photos/puppy.jpg」がキーです。\nオブジェクトキーの詳細については、「オブジェクトキー名の作成」を参照してください。\nS3 バージョニング 同じバケット内でオブジェクトの複数のバリアントを保持するには、S3 バージョニングを使用します。S3 バージョニングを使用すると、 バケットに保存されたあらゆるオブジェクトのあらゆるバージョンを保存、取得、復元することができます。バージョニングを使用すれば、意図しないユーザーアクションからもアプリケーション障害からも、簡単に復旧できます。\n詳細については、「S3 バケットでのバージョニングの使用」を参照してください。\nバージョン ID バケットで S3 バージョニングを有効にすると、Amazon S3 はバケットに追加されたすべてのオブジェクトに一意のバージョン ID を与えます。バージョニングを有効にした時点でバケットにすでに存在していたオブジェクトのバージョン ID は null です。これらの (またはその他の) オブジェクトを他のオペレーション (CopyObject および PutObject) で変更すると、新しいオブジェクトは一意のバージョン ID を取得します。\n詳細については、「S3 バケットでのバージョニングの使用」を参照してください。\nバケットポリシー バケットポリシーは、リソースベースの AWS Identity and Access Management (IAM) ポリシーを使用して、バケットとその中のオブジェクトへのアクセス許可を付与できます。バケット所有者のみが、ポリシーをバケットに関連付けることができます。バケットに添付された許可は、バケット所有者が所有するバケットのすべてのオブジェクトに適用されます。バケットポリシーのサイズは 20 KB に制限されています。\nバケットポリシーは、AWS で標準である JSON ベースのアクセスポリシー言語を使用しています。バケットポリシーを使用して、バケット内のオブジェクトに対する許可を追加または拒否できます。バケットポリシーは、リクエスタ、S3 アクション、リソース、リクエストの側面または条件(リクエストの作成に使用された IP アドレスなど)など、ポリシー内のエレメントに基づいてリクエストを許可または拒否します。例えば、バケット所有者がアップロードされたオブジェクトを完全にコントロールできるように、S3 バケットにオブジェクトをアップロードするクロスアカウント許可を付与するバケットポリシーを作成できます。詳細については、バケットポリシーの例 を参照してください。\nバケットポリシーでは、Amazon リソースネーム (ARN) やその他の値に対してワイルドカード文字を使用して、オブジェクトのサブセットに対する許可を付与できます。例えば、共通のプレフィックスで始まるか、.html などの特定の拡張子で終わるオブジェクトのグループへのアクセスをコントロールできます。\nS3 アクセスポイント Amazon S3 アクセスポイントは、そのエンドポイントを使用してデータにアクセスする方法を説明する専用のアクセスポリシーを持つ名前付きネットワークエンドポイントです。アクセスポイントは、バケットにアタッチされ、それを使用して、GetObject や PutObject などの S3 オブジェクト操作を実行できます。アクセスポイントは、Amazon S3 の共有データセットへの大規模なデータアクセスの管理を簡素化します。\n各アクセスポイントには独自のアクセスポイントポリシーがあります。また、アクセスポイントごとにブロックパブリックアクセス設定を設定することもできます。Virtual Private Cloud (VPC) からのリクエストだけを受け入れるようにアクセスポイントを設定することで、プライベートネットワークへの Amazon S3 データアクセスを制限できます。\n詳細については、「Amazon S3 アクセスポイントを使用したデータアクセスの管理」を参照してください。\nアクセスコントロールリスト (ACL) ACL を使用して、個々のバケットとオブジェクトの読み取りと書き込みの許可を認可されたユーザーに付与できます。各バケットとオブジェクトには、サブリソースとして ACL がアタッチされています。ACL は、アクセスを付与する AWS アカウント またはグループまたはアクセスのタイプを定義します。ACL は IAM よりも優先されるアクセスコントロールメカニズムです。ACL の詳細については、アクセスコントロールリスト (ACL) の概要 を参照してください。\n別の AWS アカウント が S3 バケットにオブジェクトをアップロードした場合、そのアカウント（オブジェクトライター）がデフォルトでオブジェクトを所有し、そのオブジェクトへのアクセス権を持ち、ACL を介して他のユーザーにそのオブジェクトへのアクセス権を付与できます。オブジェクトの所有権を使用してこのデフォルトの動作を変更し、ACL を無効にして、バケット所有者としてバケット内のすべてのオブジェクトを自動的に所有することができます。その結果、データのアクセスコントロールは、IAM ポリシー、S3 バケットポリシー、仮想プライベートクラウド (VPC) エンドポイントポリシー、AWS Organizations サービスコントロールポリシー (SCP) などのポリシーに基づいています。\nAmazon S3 の最新のユースケースの大部分では ACL を使用する必要がなくなり、オブジェクトごとに個別にアクセスを制御する必要がある異常な状況を除き、ACL を無効にすることをお勧めします。オブジェクトの所有権を使用すると ACL を無効にして、アクセスコントロールに関するポリシーに依存できます。ACL を無効にすると、別の AWS アカウント によってアップロードされたオブジェクトを含むバケットを簡単に維持できます。バケット所有者は、バケット内のすべてのオブジェクトを所有し、ポリシーを使用してオブジェクトへのアクセスを管理できます。詳細については、「オブジェクトの所有権の制御とバケットの ACL の無効化。」を参照してください。\nリージョン 作成したバケットを Amazon S3 が保存する地理的な AWS リージョン を選択できます。レイテンシーを最適化し、コストを最小限に抑えて規制用件に対応できるリージョンを選ぶとよいでしょう。明示的に別のリージョンに移動またはレプリケートする場合を除き、AWS リージョン に保存されたオブジェクトは、そのリージョンから移動されることはありません。たとえば、欧州 (アイルランド) リージョンに格納されたオブジェクトは、ずっとそのリージョンに置かれたままです。\nAmazon S3 のデータ整合性モデル Amazon S3 には、すべての AWS リージョン にある Amazon S3 バケットの、オブジェクトの PUT と DELETE に関する、書き込み後読み取りの強力な整合性があります。この動作は、新しいオブジェクトへの書き込みと、既存のオブジェクトを上書きする PUT リクエスト、そして DELETE リクエストにも適用されます。さらに、Amazon S3 Select、Amazon S3 アクセスコントロールリスト (ACL)、Amazon S3 オブジェクトタグ、オブジェクトメタデータ (HEAD オブジェクトなど) での読み込みオペレーションには、強力な整合性があります。\n単一のキーに対する更新はアトミックです。例えば、あるスレッドから既存のキーに PUT リクエストを実行し、同時に同じキーに対して別のスレッドから GET リクエストを実行すると、古いデータまたは新しいデータを取得できますが、データの一部分だけが取得されることも、破損することもありません。\nAmazon S3 は、AWS データセンターに配置された複数のサーバー間でデータを複製することにより、高可用性を実現します。PUT リクエストが成功した場合、データは安全に保存されています。成功した PUT 応答の受信後に開始された読み取り (GET または LIST) は、PUT リクエストによって書き込まれたデータを返します。この動作の例を示します。\n新しいオブジェクトを Amazon S3 に書き込み、すぐにバケット内のキーを一覧表示します。新しいオブジェクトがリストに表示されます。\n既存のオブジェクトを置換し、すぐにそのオブジェクトの読み取りを試みます。Amazon S3 が新しいデータを返します。\n既存のオブジェクトを削除し、すぐにそのオブジェクトの読み取りを試みます。オブジェクトが削除されたため、Amazon S3 はデータを返しません。\n既存のオブジェクトを削除し、すぐにバケット内のキーのリストを表示します。オブジェクトはリストに表示されません。\nバケット設定には、結果整合性モデルがあります。具体的には、次のように処理されます。\nバケットを削除してすぐにすべてのバケットを一覧表示しても、削除されたバケットは引き続きリストに表示されます。\nバケットで初めてバージョニングを有効にしたときは、変更が完全に反映されるまでに、少し時間がかかることがあります。バケットへのオブジェクトの書き込みオペレーション (PUT または DELETE リクエスト) は、バージョニングを有効にして 15 分待ってから発行することをお勧めします。\nアプリケーションの同時実行 このセクションでは、同じアイテムに複数のクライアントから書き込むときに、Amazon S3 で予想される動作の例を示します。\n次の例では、R1 (読み取り 1) と R2 (読み取り 2) の開始前に W1 (書き込み 1) と W2 (書き込み 2) が完了しています。S3 には強固な整合性があるため、R1 と R2 はどちらも color = ruby を返します。\n次の例では、R1 の開始前に、W2 は完了していません。したがって、R1 は color = ruby または color = garnet を返す可能性があります。ただし、R2 が開始する前に W1 と W2 が終了するため、R2 は color = garnet を返します。\n最後の例では、W1 が受信確認を受け取る前に、W2 が開始します。したがって、これらは同時の書き込みとみなされます。どの書き込みを優先するのかを決定するにあたり、Amazon S3 は内部的に last-writer-wins セマンティクスを使用します。しかし、ネットワークレイテンシーなどのさまざまな要因により、Amazon S3 がリクエストを受信する順序や、アプリケーションが受信確認を受け取る順序を予測することはできません。例えば、W2 が同じリージョンにある Amazon EC2 インスタンスによって開始される一方で、W1 は遠くにあるホストによって開始されるかもしれません。両方の書き込みの受信確認を受け取った後に、読み込みを実行することが、最終的な値を決定する最善の方法です。\n関連する のサービス Amazon S3 にロードしたデータは、他の AWS のサービスでも利用できます。よく使用すると思われるサービスは次のとおりです。\nAmazon Elastic Compute Cloud (Amazon EC2) – AWS クラウド でスケーラブルなコンピューティングキャパシティーを提供します。Amazon EC2 の使用により、ハードウェアに事前投資する必要がなくなり、アプリケーションをより速く開発およびデプロイできます。Amazon EC2 を使用すると、必要な数 (またはそれ以下) の仮想サーバーの起動、セキュリティおよびネットワーキングの構成、ストレージの管理ができます。\nAmazon EMR – ビジネス、研究者、データアナリスト、およびデベロッパーが、簡単かつ費用対効果の高い方法で、莫大な量のデータを処理できます。Amazon EMR は、Amazon EC2 および Amazon S3 のウェブスケールのインフラストラクチャ上で稼動するホストされた Hadoop フレームワークを使用しています。\nAWSSnow ファミリー– 厳しいデータセンター以外の環境や、一貫性のあるネットワーク接続がない場所で運用を実行する必要があるお客様を支援します。AWS Snow ファミリーデバイスを使用して、インターネットに接続できない環境で、ローカルでコスト効果の高い方法で AWS クラウド のストレージおよび処理能力にアクセスできます。\nAWS Transfer Family – セキュアシェル (SSH) ファイル転送プロトコル（SFTP）、SSL 経由ファイル転送プロトコル（FTPS）、およびファイル転送プロトコル（FTP）を使用して、Amazon S3 または Amazon Elastic File System（Amazon EFS）との間で直接ファイル転送を行う完全マネージドサポートを提供します。\nAmazon S3 へのアクセス Amazon S3 は次のいずれかの方法で使用できます。\nAWS Management Console コンソールは、Amazon S3 と AWS リソースを管理するためのウェブベースのユーザーインターフェイスです。AWS アカウント にサインアップ済みの場合は、AWS Management Console にサインインし、AWS Management Console ホームページから [S3] を選択することで、Amazon S3 コンソールにアクセスできます。\nAWS Command Line Interface AWS コマンドラインツールを使用して、コマンドを発行するか、システムのコマンドラインでスクリプトを作成して AWS (S3 を含む) タスクを実行します。\nAWS Command Line Interface (AWS CLI) は、幅広い AWS のサービス のセットに対するコマンドを提供します。AWS CLI は、Windows、macOS、Linux でサポートされています。使用を開始するには、「 AWS Command Line Interface ユーザーガイド」を参照してください。Amazon S3 用コマンドの詳細については、AWS CLI コマンドリファレンスの s3api および s3control を参照してください。\nAWS SDK AWS には、さまざまなプログラミング言語およびプラットフォーム (Java、python、Ruby、.NET、iOS、Android など) のライブラリとサンプルコードで構成された SDK (ソフトウェア開発キット) が用意されています。AWS SDK は、S3 や AWS へのプログラムによるアクセスを作成するのに役立ちます。Amazon S3 は REST サービスです。AWS SDK ライブラリを使用して Amazon S3 にリクエストを送信できます。これは、基盤となる Amazon S3 REST API をラップし、プログラミングタスクを簡素化します。例えば、SDK は署名の計算、リクエストの暗号化による署名、エラーの管理、リクエストの自動再試行などのタスクを処理します。AWS SDK のダウンロードやインストールなどの詳細については、「AWS のツール」を参照してください。\nAmazon S3 とのすべてのやり取りは認証されるか匿名で行われます。AWS SDK を使用している場合、指定したキーから、ライブラリによって認証のための署名が計算されます。Amazon S3 へのリクエストの作成方法の詳細については、「リクエストの実行」を参照してください。\nAmazon S3 REST API Amazon S3 は、プログラミング言語に依存しないアーキテクチャとして設計されており、AWS がサポートされているインターフェイスを使用してオブジェクトを保存、取得します。Amazon S3 REST API を使用して、プログラムによって S3 や AWS にアクセスすることができます。REST API は、Amazon S3 に対する HTTP インターフェイスです。REST API では、標準 HTTP リクエストを使用してバケットとオブジェクトを作成、取得、削除できます。\nREST API を使用する場合、HTTP をサポートする任意のツールキットを使用できます。匿名で読み取り可能なオブジェクトであれば、ブラウザを使用して取得することもできます。\nREST API は標準の HTTP ヘッダーとステータスコードを使用するため、標準のブラウザとツールキットが予期したとおりに機能します。一部のエリアでは、HTTP に機能が追加されています (たとえば、アクセスコントロールをサポートするヘッダーを追加しました)。このように新機能を追加する場合、できるだけ標準 HTTP 書式の使用法に合致するように最善を尽くしました。\nただし、アプリケーションで直接 REST API を呼び出す場合、署名を計算するコードを作成し、それをリクエストに追加する必要があります。Amazon S3 へのリクエストの作成方法の詳細については、「リクエストの実行」を参照してください。\nAmazon S3 の支払い Amazon S3 の料金は、アプリケーションのストレージ要件を考慮しなくてすむように設定されています。ほとんどのストレージプロバイダーでは、あらかじめ決められた量のストレージおよびネットワーク転送容量を購入する必要があります。このシナリオでは、その容量を超えると、サービスが停止されるか、高額な超過料金を支払う必要があります。その容量を超えない場合でも、全量を使用したものとして支払うことになります。\nAmazon S3 では、実際に使用した分だけが請求されます。隠れた料金や超過料金はありません。このモデルでは、AWS インフラストラクチャのコスト面のメリットを得ながら、ビジネスの成長に応じた可変コストのサービスを利用することができます。詳細については、Amazon S3 の料金 を参照してください。\nAWS にサインアップすると、Amazon S3 を含む AWS のすべてのサービスに対して AWS アカウント が自動的にサインアップされます。ただし､料金が発生するのは、実際に使用したサービスの分のみです。Amazon S3 の新規のお客様は、Amazon S3 を無料で使い始めることができます。詳細については、「AWS 無料利用枠」を参照してください。\n請求を表示するには、AWS Billing and Cost Management コンソールで請求およびコスト管理ダッシュボードに移動します。AWS アカウント 請求の詳細については、AWS Billing ユーザーガイドを参照してください。AWS 請求および AWS アカウント についてご質問がある場合は、AWS Support にお問い合わせください。\nPCI DSS コンプライアンス Amazon S3 は、マーチャントまたはサービスプロバイダーによるクレジットカードデータの処理、ストレージ、および伝送をサポートしており、Payment Card Industry (PCI) Data Security Standard (DSS) に準拠していることが確認されています。PCI DSS の詳細 (AWS PCI Compliance Package のコピーをリクエストする方法など) については、「PCI DSS レベル 1」を参照してください。\n参考 Amazon S3 とは - Amazon Simple Storage Service docs.aws.amazon.com ","wordCount":"12961","inLanguage":"ja","datePublished":"2022-07-22T11:54:52+09:00","dateModified":"2022-07-22T11:54:52+09:00","author":{"@type":"Person","name":"Seiri"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seiri-blog.github.io/posts/amazons-s3/"},"publisher":{"@type":"Organization","name":"Seiri's Blog","logo":{"@type":"ImageObject","url":"https://seiri-blog.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://seiri-blog.github.io/ accesskey=h title="Seiri's Blog (Alt + H)"><img src=https://seiri-blog.github.io/images/logo.svg alt aria-label=logo height=35>Seiri's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://seiri-blog.github.io/search/ title="🔍 (Alt + /)" accesskey=/><span>🔍</span></a></li><li><a href=https://seiri-blog.github.io/posts/ title=記事一覧><span>記事一覧</span></a></li><li><a href=https://seiri-blog.github.io/archives/ title=アーカイブ><span>アーカイブ</span></a></li><li><a href=https://seiri-blog.github.io/tags/ title=タグ><span>タグ</span></a></li><li><a href=https://seiri-blog.github.io/policy/ title=ポリシー><span>ポリシー</span></a></li><li><a href=https://seiri-blog.github.io/trailhead-superbadge title="Trailhead Superbadge"><span>Trailhead Superbadge</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://chrome-tool.github.io/ title=Chrome拡張機能><span>Chrome拡張機能</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://wallpapers-collection.github.io/bing-wallpaper/ title="Bing Wallpaper"><span>Bing Wallpaper</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://html-online-game.github.io/ title="Online Game"><span>Online Game</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://seiri-blog.github.io/>ホーム</a>&nbsp;»&nbsp;<a href=https://seiri-blog.github.io/posts/>Posts</a></div><h1 class=post-title>Amazon S3</h1><ul class=post-tags><li><a href=https://seiri-blog.github.io/tags/aws/>AWS</a></li><li><a href=https://seiri-blog.github.io/tags/s3/>S3</a></li></ul><div class=post-meta>&lt;span title='2022-07-22 11:54:52 +0900 +0900'>2022年7月22日&lt;/span>&amp;nbsp;·&amp;nbsp;26 分&amp;nbsp;·&amp;nbsp;12961 文字&amp;nbsp;·&amp;nbsp;Seiri</div></header><div class=share-area><ul><li class=facebook><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on facebook" href='https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f' title='Facebook で共有する'><svg viewBox="0 0 512 512" height="20" width="20" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li class=twitter><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on twitter" href='https://twitter.com/intent/tweet/?text=Amazon%20S3&amp;url=https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f&amp;hashtags=AWS%2cS3' title='Twitter(X) で共有する'><svg id="svg5" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="30" width="30" viewBox="0 0 2e3 512"><g id="layer1" transform="translate(52.390088,-25.058597)"><path id="path1009" fill="#fff" d="M283.94 167.31l386.39 516.64L281.5 1104h87.51l340.42-367.76L984.48 1104h297.8L874.15 558.3l361.92-390.99h-87.51l-313.51 338.7-253.31-338.7H283.94zm128.69 64.46h136.81l604.13 807.76h-136.81L412.63 231.77z"/></g></svg></a></li><li class=hatena><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on Hatena" href='http://b.hatena.ne.jp/add?mode=confirm&amp;url=https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f&amp;title=Amazon%20S3' title='Hatena で共有する'>B!</a></li><li class=line><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on Line" href=http://line.me/R/msg/text/?https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f%0aAmazon%20S3 title='LINE で共有する'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="35" height="50"><path fill="currentcolor" d="M37.113 22.417c0-5.865-5.88-10.637-13.107-10.637s-13.108 4.772-13.108 10.637c0 5.258 4.663 9.662 10.962 10.495.427.092 1.008.282 1.155.646.132.331.086.85.042 1.185.0.0-.153.925-.187 1.122-.057.331-.263 1.296 1.135.707 1.399-.589 7.548-4.445 10.298-7.611h-.001C36.203 26.879 37.113 24.764 37.113 22.417zm-18.238 3.49h-2.604c-.379.0-.687-.308-.687-.688V20.01c0-.379.308-.687.687-.687.379.0.687.308.687.687v4.521h1.917c.379.0.687.308.687.687C19.562 25.598 19.254 25.907 18.875 25.907zM21.568 25.219c0 .379-.308.688-.687.688s-.687-.308-.687-.688V20.01c0-.379.308-.687.687-.687s.687.308.687.687v5.209zm6.27.0c0 .297-.188.559-.47.652-.071.024-.145.036-.218.036-.215.0-.42-.103-.549-.275l-2.669-3.635v3.222c0 .379-.308.688-.688.688-.379.0-.688-.308-.688-.688V20.01c0-.296.189-.558.47-.652.071-.024.144-.035.218-.035.214.0.42.103.549.275l2.67 3.635V20.01c0-.379.309-.687.688-.687.379.0.687.308.687.687v5.209zm4.214-3.292c.379.0.688.308.688.688.0.379-.308.687-.688.687h-1.917v1.23h1.917c.379.0.688.308.688.687s-.309.688-.688.688h-2.604c-.378.0-.687-.308-.687-.688v-2.603-.001s0-.001.0-.001v-2.601c0-.001.0-.001.0-.002.0-.379.308-.687.687-.687h2.604c.379.0.688.308.688.687s-.308.687-.688.687h-1.917v1.23h1.917z"/></svg></a></li></ul></div><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目次</span></summary><div class=inner><ul><li><a href=#amazon-s3-%e3%81%a8%e3%81%af aria-label="Amazon S3 とは">Amazon S3 とは</a><ul><li><a href=#%e3%83%88%e3%83%94%e3%83%83%e3%82%af aria-label=トピック>トピック</a></li></ul></li><li><a href=#amazon-s3-%e3%81%ae%e6%a9%9f%e8%83%bd aria-label="Amazon S3 の機能">Amazon S3 の機能</a><ul><li><a href=#%e3%82%b9%e3%83%88%e3%83%ac%e3%83%bc%e3%82%b8%e3%82%af%e3%83%a9%e3%82%b9 aria-label=ストレージクラス>ストレージクラス</a></li><li><a href=#%e3%82%b9%e3%83%88%e3%83%ac%e3%83%bc%e3%82%b8%e7%ae%a1%e7%90%86 aria-label=ストレージ管理>ストレージ管理</a></li><li><a href=#%e3%82%a2%e3%82%af%e3%82%bb%e3%82%b9%e7%ae%a1%e7%90%86 aria-label=アクセス管理>アクセス管理</a></li><li><a href=#%e3%83%87%e3%83%bc%e3%82%bf%e5%87%a6%e7%90%86 aria-label=データ処理>データ処理</a></li><li><a href=#%e3%82%b9%e3%83%88%e3%83%ac%e3%83%bc%e3%82%b8%e3%81%ae%e3%83%ad%e3%82%b0%e8%a8%98%e9%8c%b2%e3%81%a8%e3%83%a2%e3%83%8b%e3%82%bf%e3%83%aa%e3%83%b3%e3%82%b0 aria-label=ストレージのログ記録とモニタリング>ストレージのログ記録とモニタリング</a><ul><li><a href=#%e8%87%aa%e5%8b%95%e3%83%a2%e3%83%8b%e3%82%bf%e3%83%aa%e3%83%b3%e3%82%b0%e3%83%84%e3%83%bc%e3%83%ab aria-label=自動モニタリングツール>自動モニタリングツール</a></li><li><a href=#%e6%89%8b%e5%8b%95%e3%83%a2%e3%83%8b%e3%82%bf%e3%83%aa%e3%83%b3%e3%82%b0%e3%83%84%e3%83%bc%e3%83%ab aria-label=手動モニタリングツール>手動モニタリングツール</a></li></ul></li></ul></li><li><a href=#%e5%88%86%e6%9e%90%e3%81%a8%e3%82%a4%e3%83%b3%e3%82%b5%e3%82%a4%e3%83%88 aria-label=分析とインサイト>分析とインサイト</a></li><li><a href=#%e5%bc%b7%e5%8a%9b%e3%81%aa%e6%95%b4%e5%90%88%e6%80%a7 aria-label=強力な整合性>強力な整合性</a></li><li><a href=#amazon-s3-%e3%81%ae%e4%bb%95%e7%b5%84%e3%81%bf aria-label="Amazon S3 の仕組み">Amazon S3 の仕組み</a><ul><li><a href=#%e3%83%88%e3%83%94%e3%83%83%e3%82%af-1 aria-label=トピック>トピック</a></li><li><a href=#%e3%83%90%e3%82%b1%e3%83%83%e3%83%88 aria-label=バケット>バケット</a></li></ul></li><li><a href=#%e3%82%aa%e3%83%96%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88 aria-label=オブジェクト>オブジェクト</a></li><li><a href=#%e3%82%ad%e3%83%bc aria-label=キー>キー</a></li><li><a href=#s3-%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%8b%e3%83%b3%e3%82%b0 aria-label="S3 バージョニング">S3 バージョニング</a></li><li><a href=#%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3-id aria-label="バージョン ID">バージョン ID</a></li><li><a href=#%e3%83%90%e3%82%b1%e3%83%83%e3%83%88%e3%83%9d%e3%83%aa%e3%82%b7%e3%83%bc aria-label=バケットポリシー>バケットポリシー</a></li><li><a href=#s3-%e3%82%a2%e3%82%af%e3%82%bb%e3%82%b9%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88 aria-label="S3 アクセスポイント">S3 アクセスポイント</a></li><li><a href=#%e3%82%a2%e3%82%af%e3%82%bb%e3%82%b9%e3%82%b3%e3%83%b3%e3%83%88%e3%83%ad%e3%83%bc%e3%83%ab%e3%83%aa%e3%82%b9%e3%83%88-acl aria-label="アクセスコントロールリスト (ACL)">アクセスコントロールリスト (ACL)</a></li><li><a href=#%e3%83%aa%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3 aria-label=リージョン>リージョン</a></li><li><a href=#amazon-s3-%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e6%95%b4%e5%90%88%e6%80%a7%e3%83%a2%e3%83%87%e3%83%ab aria-label="Amazon S3 のデータ整合性モデル">Amazon S3 のデータ整合性モデル</a></li><li><a href=#%e3%82%a2%e3%83%97%e3%83%aa%e3%82%b1%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%ae%e5%90%8c%e6%99%82%e5%ae%9f%e8%a1%8c aria-label=アプリケーションの同時実行>アプリケーションの同時実行</a></li><li><a href=#%e9%96%a2%e9%80%a3%e3%81%99%e3%82%8b-%e3%81%ae%e3%82%b5%e3%83%bc%e3%83%93%e3%82%b9 aria-label="関連する のサービス">関連する のサービス</a></li><li><a href=#amazon-s3-%e3%81%b8%e3%81%ae%e3%82%a2%e3%82%af%e3%82%bb%e3%82%b9 aria-label="Amazon S3 へのアクセス">Amazon S3 へのアクセス</a></li><li><a href=#aws-management-console aria-label="AWS Management Console">AWS Management Console</a></li><li><a href=#aws-command-line-interface aria-label="AWS Command Line Interface">AWS Command Line Interface</a></li><li><a href=#aws-sdk aria-label="AWS SDK">AWS SDK</a></li><li><a href=#amazon-s3-rest-api aria-label="Amazon S3 REST API">Amazon S3 REST API</a></li><li><a href=#amazon-s3-%e3%81%ae%e6%94%af%e6%89%95%e3%81%84 aria-label="Amazon S3 の支払い">Amazon S3 の支払い</a></li><li><a href=#pci-dss-%e3%82%b3%e3%83%b3%e3%83%97%e3%83%a9%e3%82%a4%e3%82%a2%e3%83%b3%e3%82%b9 aria-label="PCI DSS コンプライアンス">PCI DSS コンプライアンス</a></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div><div style="display:flex;justify-content:cente;margin:.5em auto"><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-4988552421895566 data-ad-slot=7460187386></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><div class=post-content><h2 id=amazon-s3-とは>Amazon S3 とは<a hidden class=anchor aria-hidden=true href=#amazon-s3-とは>#</a></h2><p>Amazon Simple Storage Service (Amazon S3) は、業界をリードするスケーラビリティ、データ可用性、セキュリティ、およびパフォーマンスを提供するオブジェクトストレージサービスです。あらゆる規模や業界のお客様が、Amazon S3 を使用して、データレイク、ウェブサイト、モバイルアプリケーション、バックアップおよび復元、アーカイブ、エンタープライズアプリケーション、IoT デバイス、ビッグデータ分析など、広範なユースケースのデータを容量にかかわらず、保存して保護することができます。Amazon S3 には、特定のビジネス、組織、コンプライアンスの要件を満たすために、データへのアクセスを最適化、整理、設定できる管理機能があります。</p><h3 id=トピック>トピック<a hidden class=anchor aria-hidden=true href=#トピック>#</a></h3><ul><li><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#S3Features>Amazon S3 の機能</a></li><li><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#CoreConcepts>Amazon S3 の仕組み</a></li><li><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#ConsistencyModel>Amazon S3 のデータ整合性モデル</a></li><li><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#RelatedAmazonWebServices>関連する のサービス</a></li><li><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#API>Amazon S3 へのアクセス</a></li><li><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#PayingforStorage>Amazon S3 の支払い</a></li><li><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#pci-dss-compliance>PCI DSS コンプライアンス</a></li></ul><h2 id=amazon-s3-の機能>Amazon S3 の機能<a hidden class=anchor aria-hidden=true href=#amazon-s3-の機能>#</a></h2><h3 id=ストレージクラス>ストレージクラス<a hidden class=anchor aria-hidden=true href=#ストレージクラス>#</a></h3><p>Amazon S3 では、さまざまなユースケース向けに、幅広いストレージクラスが提供されています。例えば、ミッションクリティカルな本番データを S3 Standard に保存して頻繁にアクセスしたり、アクセス頻度の低いデータを S3 標準 – IA または S3 1 ゾーン – IA に保存してコストを節約したり、S3 Glacier Instant Retrieval、S3 Glacier Flexible Retrieval、S3 Glacier Deep Archive でデータを最も低いコストでアーカイブしたりできます。</p><p>S3 Intelligent-Tiering では、変更する、または不明なアクセスパターンを持つデータを保存できます。これにより、アクセスパターンが変更されたときに 4 つのアクセス層間でデータを自動的に移動することで、ストレージコストを最適化できます。4 つのアクセス階層にあ、高頻度のアクセスと低頻度のアクセス用に最適化された 2 つの低レイテンシーのアクセス階層と、稀にしかアクセスされないデータ向けに設計された非同期アクセス用の 2 つのオプトインアーカイブアクセス階層があります。</p><p>詳細については、「<a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/storage-class-intro.html>Amazon S3 ストレージクラスを使用する</a>」を参照してください。S3 Glacier Flexible Retrieval の詳細については、<a href=https://docs.aws.amazon.com/ja_jp/amazonglacier/latest/dev/introduction.html>Amazon S3 Glacier デベロッパーガイド</a>を参照してください。</p><h3 id=ストレージ管理>ストレージ管理<a hidden class=anchor aria-hidden=true href=#ストレージ管理>#</a></h3><p>Amazon S3 には、コストの管理、規制要件への対応、レイテンシーの削減、コンプライアンス要件のためのデータの複数の個別コピーの保存で使用できるストレージ管理機能があります。</p><ul><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/object-lifecycle-mgmt.html>S3 ライフサイクル</a> – オブジェクトを管理し、ライフサイクルを通じてコスト効率の高い方法で保存できるようにライフサイクルポリシーを設定します。オブジェクトを他の S3 ストレージクラスに移行したり、ライフタイムが終了したオブジェクトを期限切れにすることができます。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/object-lock.html>S3 オブジェクトロック</a> – Amazon S3 オブジェクトが固定期間または無期限に削除または上書きされるのを防止します。オブジェクトロックを使用して、write-once-read-many (WORM) ストレージを必要とする規制要件を満たしたり、オブジェクトの変更や削除に対する保護レイヤーを追加したりできます。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/replication.html>S3 レプリケーション</a> – オブジェクトおよびそれぞれのメタデータタグとオブジェクトタグを、同じまたは異なる AWS リージョン にある 1 つまたは複数のレプリケーション先バケットにレプリケートして、レイテンシーの削減、コンプライアンス、セキュリティ、その他のユースケースで活用できます。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/batch-ops.html>S3 バッチ操作</a> – 1 つの S3 API リクエストまたは Amazon S3 コンソールで数回クリックするだけで、数十億のオブジェクトを大規模に管理できます。バッチ操作を使用すると、次のようなオペレーションを実行できます。コピー、AWS Lambda 関数の呼び出し、数百万または数十億のオブジェクトの復元。</p></li></ul><h3 id=アクセス管理>アクセス管理<a hidden class=anchor aria-hidden=true href=#アクセス管理>#</a></h3><p>Amazon S3 には、バケットとオブジェクトへのアクセスを監査および管理する機能があります。デフォルトでは、S3 バケットとオブジェクトはプライベートです。作成した S3 リソースにのみアクセスできます。以下の機能を使用して、特定のユースケースをサポートする詳細なリソース許可を付与したり、Amazon S3 リソースの許可を監査したりできます。</p><ul><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/access-control-block-public-access.html>S3 ブロックパブリックアクセス</a> – S3 バケットおよびオブジェクトへのパブリックアクセスをブロックします。デフォルトでは、ブロックパブリックアクセス設定はアカウントレベルとバケットレベルで有効になっています。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/s3-access-control.html>AWS Identity and Access Management (IAM)</a> – AWS アカウント の IAM ユーザーを作成して、Amazon S3 リソースへのアクセスを管理します。例えば、Amazon S3 で IAM を使用して、AWS アカウント が所有する S3 バケットに対するユーザーまたはユーザーグループのアクセス権のタイプをコントロールすることができます。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/bucket-policies.html>バケットポリシー</a> – IAM ベースのポリシー言語を使用して、S3 バケットとその中のオブジェクトに対するリソースベースの許可を設定します。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/access-points.html>Amazon S3 アクセスポイント</a> — 専用アクセスポリシーを持つ名前付きネットワークエンドポイントを設定して、Amazon S3 の共有データセットへの大規模なデータアクセスを管理します。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/acls.html>アクセスコントロールリスト (ACL)</a> – 個々のバケットおよびオブジェクトに対する読み取りおよび書き込みの許可を、承認されたユーザーに付与します。原則として、アクセスコントロールには ACL ではなく S3 リソースベースのポリシー (バケットポリシーとアクセスポイントポリシー) または IAM ポリシーを使用することをお勧めします。ACL は、リソースベースのポリシーと IAM よりも優先されるアクセスコントロールメカニズムです。リソースベースのポリシーまたは IAM ポリシーの代わりに ACL を使用する場合の詳細については、「アクセスポリシーのガイドライン」を参照してください。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/about-object-ownership.html>S3 オブジェクト所有権</a> - ACL を無効にし、バケット内のすべてのオブジェクトの所有権を取得し、Amazon S3 に保存されているデータのアクセス管理を簡素化します。バケット所有者はバケット内のすべてのオブジェクトを自動的に所有し完全に制御できます。データのアクセス制御はポリシーに基づきます。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/access-analyzer.html>Access Analyzer for S3</a> – S3 バケットアクセスポリシーを評価およびモニタリングし、ポリシーが S3 リソースへの意図したアクセスのみを提供することを確認します。</p></li></ul><h3 id=データ処理>データ処理<a hidden class=anchor aria-hidden=true href=#データ処理>#</a></h3><p>データを変換し、ワークフローをトリガーして、他のさまざまな処理アクティビティを大規模に自動化するには、次の機能を使用できます。</p><ul><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/transforming-objects.html>S3 Object Lambda</a> – Amazon S3 GET リクエストに独自のコードを追加して、データがアプリケーションに返されるときにそのデータを変更および処理できます。行のフィルタリング、画像の動的なサイズ変更、機密データの編集などを行います。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/NotificationHowTo.html>イベント通知</a> – S3 リソースに変更が加えられると、Amazon Simple Notification Service (Amazon SNS)、Amazon Simple Queue Service (Amazon SQS)、および AWS Lambda を使用するワークフローをトリガーします。</p></li></ul><h3 id=ストレージのログ記録とモニタリング>ストレージのログ記録とモニタリング<a hidden class=anchor aria-hidden=true href=#ストレージのログ記録とモニタリング>#</a></h3><p>Amazon S3 には、Amazon S3 リソースの使用状況をモニタリングおよびコントロールするために使用できるロギングおよびモニタリングツールが用意されています。詳細については、「<a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/monitoring-automated-manual.html>モニタリングツール </a>」を参照してください。</p><h4 id=自動モニタリングツール>自動モニタリングツール<a hidden class=anchor aria-hidden=true href=#自動モニタリングツール>#</a></h4><ul><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/cloudwatch-monitoring.html>Amazon S3 の Amazon CloudWatch</a> メトリクス – TS3 リソースのオペレーション状態を追跡し、推定請求額がユーザー定義のしきい値に達したときに請求アラートを設定します。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/cloudtrail-logging.html>AWS CloudTrail</a> – ユーザー、ロール、または Amazon S3 で AWS のサービス によって行われるアクションを記録します。CloudTrail ログを使用すると、S3 バケットレベルおよびオブジェクトレベルのオペレーションの詳細な API 追跡が可能になります。</p></li></ul><h4 id=手動モニタリングツール>手動モニタリングツール<a hidden class=anchor aria-hidden=true href=#手動モニタリングツール>#</a></h4><ul><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/ServerLogs.html>サーバーアクセスログ</a> – バケットに対するリクエストの詳細が記録されます。サーバーアクセスのログ記録を使用して、セキュリティとアクセスの監査、カスタマーベースに関するラーニング、Amazon S3 請求書の把握などの多くのユースケースに対応できます。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/awssupport/latest/user/trusted-advisor.html>AWSTrusted Advisor</a> – AWS ベストプラクティスチェックを使用してアカウントを評価し、AWS インフラストラクチャを最適化し、セキュリティとパフォーマンスを向上させ、コストを削減し、サービスクォータを監視する方法を特定します。その後、推奨事項に従って、サービスとリソースを最適化できます。</p></li></ul><h2 id=分析とインサイト>分析とインサイト<a hidden class=anchor aria-hidden=true href=#分析とインサイト>#</a></h2><p>Amazon S3 には、ストレージの使用状況を可視化するための機能が用意されています。これにより、ストレージを大規模に理解、分析し、最適化することができます。</p><ul><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/storage_lens.html>Amazon S3 Storage Lens</a> – ストレージを理解、分析し、最適化します。S3 Storage Lens は、29 以上の使用状況およびアクティビティのメトリクスとインタラクティブなダッシュボードを提供し、組織全体、特定のアカウント、AWS リージョン、バケット、またはプレフィックスに関するデータを集約します。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/analytics-storage-class.html>ストレージクラス分析</a> – ストレージアクセスパターンを分析して、よりコスト効果の高いストレージクラスにデータを移動するタイミングを決定します。</p></li><li><p><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/storage-inventory.html>インベントリ付き S3 インベントリレポート</a> – オブジェクトとそれに対応するメタデータを監査してレポートし、インベントリレポートでアクションを実行するように他の Amazon S3 機能を設定します。例えば、オブジェクトのレプリケーションと暗号化のステータスをレポートできます。インベントリレポートの各オブジェクトで使用できるすべてのメタデータのリストについては、「<a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/storage-inventory.html#storage-inventory-contents>Amazon S3 インベントリリスト</a>」を参照してください。</p></li></ul><h2 id=強力な整合性>強力な整合性<a hidden class=anchor aria-hidden=true href=#強力な整合性>#</a></h2><p>Amazon S3 には、すべての AWS リージョン にある Amazon S3 バケットの、オブジェクトの PUT と DELETE に関する、書き込み後読み取りの強力な整合性があります。この動作は、新しいオブジェクトへの書き込みと、既存のオブジェクトを上書きする PUT、そして DELETE リクエストにも適用されます。さらに、Amazon S3 Select、Amazon S3 アクセスコントロールリスト (ACL)、Amazon S3 オブジェクトタグ、オブジェクトメタデータ (HEAD オブジェクトなど) での読み込みオペレーションには、強力な整合性があります。詳細については、「<a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html#ConsistencyModel>Amazon S3 のデータ整合性モデル</a>」を参照してください。</p><h2 id=amazon-s3-の仕組み>Amazon S3 の仕組み<a hidden class=anchor aria-hidden=true href=#amazon-s3-の仕組み>#</a></h2><p>Amazon S3 は、データをオブジェクトとしてバケットに保存するオブジェクトストレージサービスです。オブジェクトとは、ファイルと、そのファイルを記述している任意のメタデータのことです。バケット とは、オブジェクトのコンテナのことです。</p><p>Amazon S3 にデータを保存するには、まずバケットを作成し、バケット名および AWS リージョン を指定します。次に、Amazon S3 のオブジェクトとしてそのバケットにデータをアップロードします。各オブジェクトには、キー(またはキー名) があります。これは、バケット内のオブジェクトの一意の識別子です。</p><p>S3 には、特定のユースケースをサポートするように設定できる機能があります。例えば、S3 Versioning を使用すると、オブジェクトの複数のバージョンを同じバケットに保持し、誤って削除または上書きされたオブジェクトを復元することができます。</p><p>バケットとその中のオブジェクトはプライベートであり、アクセス許可を明示的に付与した場合にのみアクセスできます。バケットポリシー、AWS Identity and Access Management(IAM) ポリシー、アクセスコントロールリスト (ACL)、および S3 アクセスポイントを使用して、アクセスを管理できます。</p><h3 id=トピック-1>トピック<a hidden class=anchor aria-hidden=true href=#トピック-1>#</a></h3><ul><li>バケット</li><li>オブジェクト</li><li>キー</li><li>S3 バージョニング</li><li>バージョン ID</li><li>バケットポリシー</li><li>S3 アクセスポイント</li><li>アクセスコントロールリスト (ACL)</li><li>リージョン</li></ul><h3 id=バケット>バケット<a hidden class=anchor aria-hidden=true href=#バケット>#</a></h3><p>バケットとは、Amazon S3 に保存されるオブジェクトのコンテナです。バケットにはオブジェクトをいくつでも保存でき、アカウントにはバケットを 100 個まで保存できます。増加をリクエストするには、Service Quotas コンソールにアクセスしてください。</p><p>すべてのオブジェクトはバケット内に保存されます。例えば、photos/puppy.jpg という名前のオブジェクトが米国西部 (オレゴン) リージョンにある DOC-EXAMPLE-BUCKET バケットに保存される場合、URL <a href=https://DOC-EXAMPLE-BUCKET.s3.us-west-2.amazonaws.com/photos/puppy.jpg>https://DOC-EXAMPLE-BUCKET.s3.us-west-2.amazonaws.com/photos/puppy.jpg</a> を使用してアドレスを解決できます。詳細については、「バケットへのアクセス」を参照してください。</p><p>バケットを作成するときは、バケット名を入力し、バケットが存在する AWS リージョン を選択します。一度バケットを作成したら、そのバケット名またはリージョンを変更することはできません。バケット名は、バケットの命名規則に従う必要があります。また、バケットを設定して、S3 バージョニングまたは、他のストレージ管理機能を使用できます。</p><p>バケットは、以下も行います。</p><ul><li><p>最も高いレベルで Amazon S3 名前空間を編成します。</p></li><li><p>ストレージおよびデータ転送料金が課金されるアカウントを特定します。</p></li><li><p>バケットポリシー、アクセスコントロールリスト (ACL)、および S3 アクセスポイントなどのアクセスコントロールオプションを提供します。これを使用すると、Amazon S3 リソースへのアクセスを管理できます。</p></li><li><p>使用状況レポートの集計単位として機能します。</p></li></ul><p>バケットの詳細については、「バケットの概要」を参照してください。</p><h2 id=オブジェクト>オブジェクト<a hidden class=anchor aria-hidden=true href=#オブジェクト>#</a></h2><p>オブジェクトとは、Amazon S3 に保存される基本エンティティです。オブジェクトは、オブジェクトデータとメタデータで構成されます。メタデータは、オブジェクトを表現する名前と値のペアのセットです。これには最終更新日などのデフォルトメタデータや、Content-Type などの標準 HTTP メタデータが含まれます。また、オブジェクトの保存時にカスタムメタデータを指定することもできます。</p><p>オブジェクトは、バケット内でキー (名前)とバージョン ID（バケットで S3 バージョニングが有効になっている場合）によって一意に特定されます。オブジェクトの詳細については、Amazon S3 オブジェクトの概要 を参照してください。</p><h2 id=キー>キー<a hidden class=anchor aria-hidden=true href=#キー>#</a></h2><p>オブジェクトキー (または キー名) は、バケット内のオブジェクトの固有の識別子です。バケット内のすべてのオブジェクトは、厳密に 1 個のキーを持ちます。バケット、オブジェクトキー、およびオプションでバージョン ID（バケットで S3 バージョニングが有効になっている場合）の組み合わせによって、各オブジェクトが一意に識別されます。そのため、Amazon S3 を「バケット + キー + バージョン」とオブジェクト自体の間での基本データマップと考えることができます。</p><p>Amazon S3 内の各オブジェクトは、ウェブサービスエンドポイント、バケット名、キー、およびオプションでバージョンを組み合わせることで一意にアドレスを指定できます。例えば、https://DOC-EXAMPLE-BUCKET.s3.us-west-2.amazonaws.com/photos/puppy.jpg という URL で、「DOC-EXAMPLE-BUCKET」がバケットの名前で、「photos/puppy.jpg」がキーです。</p><p>オブジェクトキーの詳細については、「オブジェクトキー名の作成」を参照してください。</p><h2 id=s3-バージョニング>S3 バージョニング<a hidden class=anchor aria-hidden=true href=#s3-バージョニング>#</a></h2><p>同じバケット内でオブジェクトの複数のバリアントを保持するには、S3 バージョニングを使用します。S3 バージョニングを使用すると、 バケットに保存されたあらゆるオブジェクトのあらゆるバージョンを保存、取得、復元することができます。バージョニングを使用すれば、意図しないユーザーアクションからもアプリケーション障害からも、簡単に復旧できます。</p><p>詳細については、「S3 バケットでのバージョニングの使用」を参照してください。</p><h2 id=バージョン-id>バージョン ID<a hidden class=anchor aria-hidden=true href=#バージョン-id>#</a></h2><p>バケットで S3 バージョニングを有効にすると、Amazon S3 はバケットに追加されたすべてのオブジェクトに一意のバージョン ID を与えます。バージョニングを有効にした時点でバケットにすでに存在していたオブジェクトのバージョン ID は null です。これらの (またはその他の) オブジェクトを他のオペレーション (CopyObject および PutObject) で変更すると、新しいオブジェクトは一意のバージョン ID を取得します。</p><p>詳細については、「S3 バケットでのバージョニングの使用」を参照してください。</p><h2 id=バケットポリシー>バケットポリシー<a hidden class=anchor aria-hidden=true href=#バケットポリシー>#</a></h2><p>バケットポリシーは、リソースベースの AWS Identity and Access Management (IAM) ポリシーを使用して、バケットとその中のオブジェクトへのアクセス許可を付与できます。バケット所有者のみが、ポリシーをバケットに関連付けることができます。バケットに添付された許可は、バケット所有者が所有するバケットのすべてのオブジェクトに適用されます。バケットポリシーのサイズは 20 KB に制限されています。</p><p>バケットポリシーは、AWS で標準である JSON ベースのアクセスポリシー言語を使用しています。バケットポリシーを使用して、バケット内のオブジェクトに対する許可を追加または拒否できます。バケットポリシーは、リクエスタ、S3 アクション、リソース、リクエストの側面または条件(リクエストの作成に使用された IP アドレスなど)など、ポリシー内のエレメントに基づいてリクエストを許可または拒否します。例えば、バケット所有者がアップロードされたオブジェクトを完全にコントロールできるように、S3 バケットにオブジェクトをアップロードするクロスアカウント許可を付与するバケットポリシーを作成できます。詳細については、バケットポリシーの例 を参照してください。</p><p>バケットポリシーでは、Amazon リソースネーム (ARN) やその他の値に対してワイルドカード文字を使用して、オブジェクトのサブセットに対する許可を付与できます。例えば、共通のプレフィックスで始まるか、.html などの特定の拡張子で終わるオブジェクトのグループへのアクセスをコントロールできます。</p><h2 id=s3-アクセスポイント>S3 アクセスポイント<a hidden class=anchor aria-hidden=true href=#s3-アクセスポイント>#</a></h2><p>Amazon S3 アクセスポイントは、そのエンドポイントを使用してデータにアクセスする方法を説明する専用のアクセスポリシーを持つ名前付きネットワークエンドポイントです。アクセスポイントは、バケットにアタッチされ、それを使用して、GetObject や PutObject などの S3 オブジェクト操作を実行できます。アクセスポイントは、Amazon S3 の共有データセットへの大規模なデータアクセスの管理を簡素化します。</p><p>各アクセスポイントには独自のアクセスポイントポリシーがあります。また、アクセスポイントごとにブロックパブリックアクセス設定を設定することもできます。Virtual Private Cloud (VPC) からのリクエストだけを受け入れるようにアクセスポイントを設定することで、プライベートネットワークへの Amazon S3 データアクセスを制限できます。</p><p>詳細については、「Amazon S3 アクセスポイントを使用したデータアクセスの管理」を参照してください。</p><h2 id=アクセスコントロールリスト-acl>アクセスコントロールリスト (ACL)<a hidden class=anchor aria-hidden=true href=#アクセスコントロールリスト-acl>#</a></h2><p>ACL を使用して、個々のバケットとオブジェクトの読み取りと書き込みの許可を認可されたユーザーに付与できます。各バケットとオブジェクトには、サブリソースとして ACL がアタッチされています。ACL は、アクセスを付与する AWS アカウント またはグループまたはアクセスのタイプを定義します。ACL は IAM よりも優先されるアクセスコントロールメカニズムです。ACL の詳細については、アクセスコントロールリスト (ACL) の概要 を参照してください。</p><p>別の AWS アカウント が S3 バケットにオブジェクトをアップロードした場合、そのアカウント（オブジェクトライター）がデフォルトでオブジェクトを所有し、そのオブジェクトへのアクセス権を持ち、ACL を介して他のユーザーにそのオブジェクトへのアクセス権を付与できます。オブジェクトの所有権を使用してこのデフォルトの動作を変更し、ACL を無効にして、バケット所有者としてバケット内のすべてのオブジェクトを自動的に所有することができます。その結果、データのアクセスコントロールは、IAM ポリシー、S3 バケットポリシー、仮想プライベートクラウド (VPC) エンドポイントポリシー、AWS Organizations サービスコントロールポリシー (SCP) などのポリシーに基づいています。</p><p>Amazon S3 の最新のユースケースの大部分では ACL を使用する必要がなくなり、オブジェクトごとに個別にアクセスを制御する必要がある異常な状況を除き、ACL を無効にすることをお勧めします。オブジェクトの所有権を使用すると ACL を無効にして、アクセスコントロールに関するポリシーに依存できます。ACL を無効にすると、別の AWS アカウント によってアップロードされたオブジェクトを含むバケットを簡単に維持できます。バケット所有者は、バケット内のすべてのオブジェクトを所有し、ポリシーを使用してオブジェクトへのアクセスを管理できます。詳細については、「オブジェクトの所有権の制御とバケットの ACL の無効化。」を参照してください。</p><h2 id=リージョン>リージョン<a hidden class=anchor aria-hidden=true href=#リージョン>#</a></h2><p>作成したバケットを Amazon S3 が保存する地理的な AWS リージョン を選択できます。レイテンシーを最適化し、コストを最小限に抑えて規制用件に対応できるリージョンを選ぶとよいでしょう。明示的に別のリージョンに移動またはレプリケートする場合を除き、AWS リージョン に保存されたオブジェクトは、そのリージョンから移動されることはありません。たとえば、欧州 (アイルランド) リージョンに格納されたオブジェクトは、ずっとそのリージョンに置かれたままです。</p><h2 id=amazon-s3-のデータ整合性モデル>Amazon S3 のデータ整合性モデル<a hidden class=anchor aria-hidden=true href=#amazon-s3-のデータ整合性モデル>#</a></h2><p>Amazon S3 には、すべての AWS リージョン にある Amazon S3 バケットの、オブジェクトの PUT と DELETE に関する、書き込み後読み取りの強力な整合性があります。この動作は、新しいオブジェクトへの書き込みと、既存のオブジェクトを上書きする PUT リクエスト、そして DELETE リクエストにも適用されます。さらに、Amazon S3 Select、Amazon S3 アクセスコントロールリスト (ACL)、Amazon S3 オブジェクトタグ、オブジェクトメタデータ (HEAD オブジェクトなど) での読み込みオペレーションには、強力な整合性があります。</p><p>単一のキーに対する更新はアトミックです。例えば、あるスレッドから既存のキーに PUT リクエストを実行し、同時に同じキーに対して別のスレッドから GET リクエストを実行すると、古いデータまたは新しいデータを取得できますが、データの一部分だけが取得されることも、破損することもありません。</p><p>Amazon S3 は、AWS データセンターに配置された複数のサーバー間でデータを複製することにより、高可用性を実現します。PUT リクエストが成功した場合、データは安全に保存されています。成功した PUT 応答の受信後に開始された読み取り (GET または LIST) は、PUT リクエストによって書き込まれたデータを返します。この動作の例を示します。</p><ul><li><p>新しいオブジェクトを Amazon S3 に書き込み、すぐにバケット内のキーを一覧表示します。新しいオブジェクトがリストに表示されます。</p></li><li><p>既存のオブジェクトを置換し、すぐにそのオブジェクトの読み取りを試みます。Amazon S3 が新しいデータを返します。</p></li><li><p>既存のオブジェクトを削除し、すぐにそのオブジェクトの読み取りを試みます。オブジェクトが削除されたため、Amazon S3 はデータを返しません。</p></li><li><p>既存のオブジェクトを削除し、すぐにバケット内のキーのリストを表示します。オブジェクトはリストに表示されません。</p></li></ul><p>バケット設定には、結果整合性モデルがあります。具体的には、次のように処理されます。</p><ul><li><p>バケットを削除してすぐにすべてのバケットを一覧表示しても、削除されたバケットは引き続きリストに表示されます。</p></li><li><p>バケットで初めてバージョニングを有効にしたときは、変更が完全に反映されるまでに、少し時間がかかることがあります。バケットへのオブジェクトの書き込みオペレーション (PUT または DELETE リクエスト) は、バージョニングを有効にして 15 分待ってから発行することをお勧めします。</p></li></ul><h2 id=アプリケーションの同時実行>アプリケーションの同時実行<a hidden class=anchor aria-hidden=true href=#アプリケーションの同時実行>#</a></h2><p>このセクションでは、同じアイテムに複数のクライアントから書き込むときに、Amazon S3 で予想される動作の例を示します。</p><p>次の例では、R1 (読み取り 1) と R2 (読み取り 2) の開始前に W1 (書き込み 1) と W2 (書き込み 2) が完了しています。S3 には強固な整合性があるため、R1 と R2 はどちらも <code>color = ruby</code> を返します。<br><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/images/consistency1.png target=_blank><img loading=lazy src=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/images/consistency1.png alt=image></a></p><p>次の例では、R1 の開始前に、W2 は完了していません。したがって、R1 は <code>color = ruby</code> または <code>color = garnet</code> を返す可能性があります。ただし、R2 が開始する前に W1 と W2 が終了するため、R2 は <code>color = garnet</code> を返します。<br><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/images/consistency2.png target=_blank><img loading=lazy src=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/images/consistency2.png alt=image></a></p><p>最後の例では、W1 が受信確認を受け取る前に、W2 が開始します。したがって、これらは同時の書き込みとみなされます。どの書き込みを優先するのかを決定するにあたり、Amazon S3 は内部的に last-writer-wins セマンティクスを使用します。しかし、ネットワークレイテンシーなどのさまざまな要因により、Amazon S3 がリクエストを受信する順序や、アプリケーションが受信確認を受け取る順序を予測することはできません。例えば、W2 が同じリージョンにある Amazon EC2 インスタンスによって開始される一方で、W1 は遠くにあるホストによって開始されるかもしれません。両方の書き込みの受信確認を受け取った後に、読み込みを実行することが、最終的な値を決定する最善の方法です。<br><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/images/consistency3.png target=_blank><img loading=lazy src=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/images/consistency3.png alt=image></a></p><h2 id=関連する-のサービス>関連する のサービス<a hidden class=anchor aria-hidden=true href=#関連する-のサービス>#</a></h2><p>Amazon S3 にロードしたデータは、他の AWS のサービスでも利用できます。よく使用すると思われるサービスは次のとおりです。</p><ul><li><p><a href>Amazon Elastic Compute Cloud (Amazon EC2)</a> – AWS クラウド でスケーラブルなコンピューティングキャパシティーを提供します。Amazon EC2 の使用により、ハードウェアに事前投資する必要がなくなり、アプリケーションをより速く開発およびデプロイできます。Amazon EC2 を使用すると、必要な数 (またはそれ以下) の仮想サーバーの起動、セキュリティおよびネットワーキングの構成、ストレージの管理ができます。</p></li><li><p><a href>Amazon EMR</a> – ビジネス、研究者、データアナリスト、およびデベロッパーが、簡単かつ費用対効果の高い方法で、莫大な量のデータを処理できます。Amazon EMR は、Amazon EC2 および Amazon S3 のウェブスケールのインフラストラクチャ上で稼動するホストされた Hadoop フレームワークを使用しています。</p></li><li><p><a href>AWSSnow ファミリー</a>– 厳しいデータセンター以外の環境や、一貫性のあるネットワーク接続がない場所で運用を実行する必要があるお客様を支援します。AWS Snow ファミリーデバイスを使用して、インターネットに接続できない環境で、ローカルでコスト効果の高い方法で AWS クラウド のストレージおよび処理能力にアクセスできます。</p></li><li><p><a href>AWS Transfer Family</a> – セキュアシェル (SSH) ファイル転送プロトコル（SFTP）、SSL 経由ファイル転送プロトコル（FTPS）、およびファイル転送プロトコル（FTP）を使用して、Amazon S3 または Amazon Elastic File System（Amazon EFS）との間で直接ファイル転送を行う完全マネージドサポートを提供します。</p></li></ul><h2 id=amazon-s3-へのアクセス>Amazon S3 へのアクセス<a hidden class=anchor aria-hidden=true href=#amazon-s3-へのアクセス>#</a></h2><p>Amazon S3 は次のいずれかの方法で使用できます。</p><h2 id=aws-management-console>AWS Management Console<a hidden class=anchor aria-hidden=true href=#aws-management-console>#</a></h2><p>コンソールは、Amazon S3 と AWS リソースを管理するためのウェブベースのユーザーインターフェイスです。AWS アカウント にサインアップ済みの場合は、AWS Management Console にサインインし、AWS Management Console ホームページから [S3] を選択することで、Amazon S3 コンソールにアクセスできます。</p><h2 id=aws-command-line-interface>AWS Command Line Interface<a hidden class=anchor aria-hidden=true href=#aws-command-line-interface>#</a></h2><p>AWS コマンドラインツールを使用して、コマンドを発行するか、システムのコマンドラインでスクリプトを作成して AWS (S3 を含む) タスクを実行します。</p><p>AWS Command Line Interface (AWS CLI) は、幅広い AWS のサービス のセットに対するコマンドを提供します。AWS CLI は、Windows、macOS、Linux でサポートされています。使用を開始するには、「 AWS Command Line Interface ユーザーガイド」を参照してください。Amazon S3 用コマンドの詳細については、AWS CLI コマンドリファレンスの s3api および s3control を参照してください。</p><h2 id=aws-sdk>AWS SDK<a hidden class=anchor aria-hidden=true href=#aws-sdk>#</a></h2><p>AWS には、さまざまなプログラミング言語およびプラットフォーム (Java、python、Ruby、.NET、iOS、Android など) のライブラリとサンプルコードで構成された SDK (ソフトウェア開発キット) が用意されています。AWS SDK は、S3 や AWS へのプログラムによるアクセスを作成するのに役立ちます。Amazon S3 は REST サービスです。AWS SDK ライブラリを使用して Amazon S3 にリクエストを送信できます。これは、基盤となる Amazon S3 REST API をラップし、プログラミングタスクを簡素化します。例えば、SDK は署名の計算、リクエストの暗号化による署名、エラーの管理、リクエストの自動再試行などのタスクを処理します。AWS SDK のダウンロードやインストールなどの詳細については、「AWS のツール」を参照してください。</p><p>Amazon S3 とのすべてのやり取りは認証されるか匿名で行われます。AWS SDK を使用している場合、指定したキーから、ライブラリによって認証のための署名が計算されます。Amazon S3 へのリクエストの作成方法の詳細については、「リクエストの実行」を参照してください。</p><h2 id=amazon-s3-rest-api>Amazon S3 REST API<a hidden class=anchor aria-hidden=true href=#amazon-s3-rest-api>#</a></h2><p>Amazon S3 は、プログラミング言語に依存しないアーキテクチャとして設計されており、AWS がサポートされているインターフェイスを使用してオブジェクトを保存、取得します。Amazon S3 REST API を使用して、プログラムによって S3 や AWS にアクセスすることができます。REST API は、Amazon S3 に対する HTTP インターフェイスです。REST API では、標準 HTTP リクエストを使用してバケットとオブジェクトを作成、取得、削除できます。</p><p>REST API を使用する場合、HTTP をサポートする任意のツールキットを使用できます。匿名で読み取り可能なオブジェクトであれば、ブラウザを使用して取得することもできます。</p><p>REST API は標準の HTTP ヘッダーとステータスコードを使用するため、標準のブラウザとツールキットが予期したとおりに機能します。一部のエリアでは、HTTP に機能が追加されています (たとえば、アクセスコントロールをサポートするヘッダーを追加しました)。このように新機能を追加する場合、できるだけ標準 HTTP 書式の使用法に合致するように最善を尽くしました。</p><p>ただし、アプリケーションで直接 REST API を呼び出す場合、署名を計算するコードを作成し、それをリクエストに追加する必要があります。Amazon S3 へのリクエストの作成方法の詳細については、「リクエストの実行」を参照してください。</p><h2 id=amazon-s3-の支払い>Amazon S3 の支払い<a hidden class=anchor aria-hidden=true href=#amazon-s3-の支払い>#</a></h2><p>Amazon S3 の料金は、アプリケーションのストレージ要件を考慮しなくてすむように設定されています。ほとんどのストレージプロバイダーでは、あらかじめ決められた量のストレージおよびネットワーク転送容量を購入する必要があります。このシナリオでは、その容量を超えると、サービスが停止されるか、高額な超過料金を支払う必要があります。その容量を超えない場合でも、全量を使用したものとして支払うことになります。</p><p>Amazon S3 では、実際に使用した分だけが請求されます。隠れた料金や超過料金はありません。このモデルでは、AWS インフラストラクチャのコスト面のメリットを得ながら、ビジネスの成長に応じた可変コストのサービスを利用することができます。詳細については、Amazon S3 の料金 を参照してください。</p><p>AWS にサインアップすると、Amazon S3 を含む AWS のすべてのサービスに対して AWS アカウント が自動的にサインアップされます。ただし､料金が発生するのは、実際に使用したサービスの分のみです。Amazon S3 の新規のお客様は、Amazon S3 を無料で使い始めることができます。詳細については、「AWS 無料利用枠」を参照してください。</p><p>請求を表示するには、AWS Billing and Cost Management コンソールで請求およびコスト管理ダッシュボードに移動します。AWS アカウント 請求の詳細については、AWS Billing ユーザーガイドを参照してください。AWS 請求および AWS アカウント についてご質問がある場合は、AWS Support にお問い合わせください。</p><h2 id=pci-dss-コンプライアンス>PCI DSS コンプライアンス<a hidden class=anchor aria-hidden=true href=#pci-dss-コンプライアンス>#</a></h2><p>Amazon S3 は、マーチャントまたはサービスプロバイダーによるクレジットカードデータの処理、ストレージ、および伝送をサポートしており、Payment Card Industry (PCI) Data Security Standard (DSS) に準拠していることが確認されています。PCI DSS の詳細 (AWS PCI Compliance Package のコピーをリクエストする方法など) については、「PCI DSS レベル 1」を参照してください。</p><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><a href=https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/Welcome.html target=_blank><div class=link-card><div class=link-card-title>Amazon S3 とは - Amazon Simple Storage Service</div><div class=link-card-hostname><div class=link-card-hostname-img><img alt=icon src=https://docs.aws.amazon.com/assets/images/favicon.ico></div><span>docs.aws.amazon.com</span></div></div></a></div><div class=share-area><ul><li class=facebook><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on facebook" href='https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f' title='Facebook で共有する'><svg viewBox="0 0 512 512" height="20" width="20" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li class=twitter><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on twitter" href='https://twitter.com/intent/tweet/?text=Amazon%20S3&amp;url=https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f&amp;hashtags=AWS%2cS3' title='Twitter(X) で共有する'><svg id="svg5" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="30" width="30" viewBox="0 0 2e3 512"><g id="layer1" transform="translate(52.390088,-25.058597)"><path id="path1009" fill="#fff" d="M283.94 167.31l386.39 516.64L281.5 1104h87.51l340.42-367.76L984.48 1104h297.8L874.15 558.3l361.92-390.99h-87.51l-313.51 338.7-253.31-338.7H283.94zm128.69 64.46h136.81l604.13 807.76h-136.81L412.63 231.77z"/></g></svg></a></li><li class=hatena><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on Hatena" href='http://b.hatena.ne.jp/add?mode=confirm&amp;url=https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f&amp;title=Amazon%20S3' title='Hatena で共有する'>B!</a></li><li class=line><a target=_blank rel="noopener noreferrer" aria-label="share Amazon S3 on Line" href=http://line.me/R/msg/text/?https%3a%2f%2fseiri-blog.github.io%2fposts%2famazons-s3%2f%0aAmazon%20S3 title='LINE で共有する'><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="35" height="50"><path fill="currentcolor" d="M37.113 22.417c0-5.865-5.88-10.637-13.107-10.637s-13.108 4.772-13.108 10.637c0 5.258 4.663 9.662 10.962 10.495.427.092 1.008.282 1.155.646.132.331.086.85.042 1.185.0.0-.153.925-.187 1.122-.057.331-.263 1.296 1.135.707 1.399-.589 7.548-4.445 10.298-7.611h-.001C36.203 26.879 37.113 24.764 37.113 22.417zm-18.238 3.49h-2.604c-.379.0-.687-.308-.687-.688V20.01c0-.379.308-.687.687-.687.379.0.687.308.687.687v4.521h1.917c.379.0.687.308.687.687C19.562 25.598 19.254 25.907 18.875 25.907zM21.568 25.219c0 .379-.308.688-.687.688s-.687-.308-.687-.688V20.01c0-.379.308-.687.687-.687s.687.308.687.687v5.209zm6.27.0c0 .297-.188.559-.47.652-.071.024-.145.036-.218.036-.215.0-.42-.103-.549-.275l-2.669-3.635v3.222c0 .379-.308.688-.688.688-.379.0-.688-.308-.688-.688V20.01c0-.296.189-.558.47-.652.071-.024.144-.035.218-.035.214.0.42.103.549.275l2.67 3.635V20.01c0-.379.309-.687.688-.687.379.0.687.308.687.687v5.209zm4.214-3.292c.379.0.688.308.688.688.0.379-.308.687-.688.687h-1.917v1.23h1.917c.379.0.688.308.688.687s-.309.688-.688.688h-2.604c-.378.0-.687-.308-.687-.688v-2.603-.001s0-.001.0-.001v-2.601c0-.001.0-.001.0-.002.0-.379.308-.687.687-.687h2.604c.379.0.688.308.688.687s-.308.687-.688.687h-1.917v1.23h1.917z"/></svg></a></li></ul></div><div style="display:flex;justify-content:center;margin:.5em auto"><ins class=adsbygoogle style=display:inline-block;width:728px;height:90px data-ad-client=ca-pub-4988552421895566 data-ad-slot=8581697363></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class=post-footer><nav class=paginav><a class=prev href=https://seiri-blog.github.io/posts/aws-lambda/><span class=title>« 前へ</span><br><span>AWS Lambda</span>
</a><a class=next href=https://seiri-blog.github.io/posts/aws-dynamodb/><span class=title>次へ »</span><br><span>AWS DynamoDB</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=seiri-blog/seiri-blog.github.io data-repo-id=R_kgDOJGyRgA data-category=General data-category-id=DIC_kwDOJGyRgM4CgDQM data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=ja crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 Seiri All rights reserved</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="コピー";function s(){t.innerHTML="コピーされました!",setTimeout(()=>{t.innerHTML="コピー"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>